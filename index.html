<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SvenshÃ¶gens vandrarhem â€“ Info</title>
  <style>
    :root{
      --turkos:#2EC7C9; --marin:#003049; --gul:#FECB2F; --text:#0a0a0a;
      --jul-rÃ¶d:#C81E1E; --jul-grÃ¶n:#0F8A5F;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;color:var(--text);}

    .app{height:100%;display:grid;place-items:center}
    .frame{position:relative;width:100vw;height:100vh;overflow:hidden}

    /* Bakgrund */
    .frame::before{content:"";position:absolute;inset:0;background:url('bg.jpg') center/cover no-repeat;transform:scale(1.02);z-index:0}
    .frame::after{content:"";position:absolute;inset:0;background:rgba(255,255,255,.15);z-index:1}

    /* SNÃ– â€“ canvasoverlay */
    #snow{
      position:absolute;inset:0;z-index:2;pointer-events:none;
      opacity:.9; /* lite mjukare */
    }

    /* Slides (lyft z-index Ã¶ver snÃ¶n) */
    .slide{position:absolute;inset:0;padding:7vh 6vw;display:flex;flex-direction:column;gap:3vh;justify-content:center;opacity:0;transform:scale(1.01);transition:opacity .8s,transform .8s;background:transparent;z-index:3}
    .slide.active{opacity:1;transform:scale(1)}

    /* Headerband â€“ extra julaccent */
    .band{
      position:absolute;top:0;left:0;right:0;
      background:linear-gradient(90deg,var(--marin),var(--turkos));
      color:#fff;padding:2.6vh 6vw;
      display:flex;flex-direction:column;align-items:center;justify-content:center;gap:.35vh;z-index:4;text-align:center
    }
    .band h1,.band small{margin:0;font-family:inherit;letter-spacing:.3px}
    .band h1{font-weight:800;font-size:clamp(22px,3.8vh,48px)}
    .band small{font-weight:700;font-size:clamp(14px,2.2vh,22px);opacity:.96}

    /* Liten â€œgirlangâ€-skugga under bandet fÃ¶r julkÃ¤nsla */
    .band::after{
      content:"";
      position:absolute;left:0;right:0;bottom:-8px;height:8px;
      background:linear-gradient(90deg,rgba(200,30,30,.35),rgba(15,138,95,.35),rgba(200,30,30,.35));
      filter:blur(6px);
    }

    /* Kort & layout */
    .cards{display:grid;grid-template-columns:repeat(12,1fr);gap:2.2vh}
    .card{grid-column:span 6;background:rgba(255,255,255,.22);backdrop-filter:blur(16px);border:2px solid rgba(255,255,255,.35);border-radius:24px;box-shadow:0 10px 30px rgba(0,0,0,.05);padding:3vh 3vw}
    .card h2{margin:.3rem 0 1.2rem;color:var(--marin);font-size:clamp(18px,3vh,34px);text-align:center}
    .card p,.card li{font-size:clamp(16px,2.4vh,26px);line-height:1.35;margin:.2rem 0}
    .list{display:grid;gap:1.2rem}

    /* VÃ¤lkomstpanel */
    .welcome-panel{background:rgba(255,255,255,.22);backdrop-filter:blur(20px);border-radius:20px;padding:2.5vh 3vw;text-align:center;margin-top:18vh;align-self:center;width:min(900px,92vw)}

    /* Mini-kort (faciliteter) */
    .mini-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:1.4rem;margin-top:1rem}
    .mini-card{background:rgba(255,255,255,.22);border:2px solid rgba(255,255,255,.35);border-radius:18px;padding:2vh 1vw;display:flex;flex-direction:column;align-items:center;justify-content:center;backdrop-filter:blur(14px);text-align:center}
    .mini-card .emoji{font-size:clamp(34px,6vh,64px);line-height:1;margin-bottom:.4em}
    .mini-card .label{font-size:clamp(14px,2.4vh,22px);font-weight:600}

    /* Ikoner & listor */
    .icon{font-size:clamp(28px,4.5vh,40px);display:grid;place-items:center;width:64px;height:64px;border-radius:16px;background:rgba(255,255,255,.35);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.4)}
    .icon-lg{font-size:clamp(36px,6vh,54px);display:grid;place-items:center;width:72px;height:72px;border-radius:18px;background:rgba(255,255,255,.35);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.4)}
    .item{display:grid;grid-template-columns:80px 1fr 130px;gap:1.2rem;align-items:center}
    .qr img{width:110px;height:110px;border-radius:12px;background:#fff;padding:6px;box-shadow:0 4px 12px rgba(0,0,0,.08)}
    .qr a{display:block;font-size:clamp(12px,1.9vh,18px);margin-top:.4rem}

    /* Centrerade listor â€“ fÃ¶r Regler/Tillval/Utcheckning */
    .center-list{list-style:none;padding:0;text-align:center;font-size:clamp(18px,2.8vh,32px);line-height:1.5;margin:0}
    .center-list li{margin:.35em 0}

    /* Progress â€“ liten julglow pÃ¥ aktiv prick */
    .progress{position:absolute;bottom:2.6vh;left:50%;transform:translateX(-50%);display:flex;gap:.6rem;z-index:4}
    .dot{width:12px;height:12px;border-radius:50%;background:#cbd5e1}
    .dot.active{background:var(--turkos);box-shadow:0 0 0 6px rgba(46,199,201,.18), 0 0 12px rgba(200,30,30,.25)}

    @media(max-width:1200px){.mini-grid{grid-template-columns:repeat(3,1fr)}}
    @media(max-width:800px){
      .mini-grid{grid-template-columns:repeat(2,1fr)}
      .item{grid-template-columns:64px 1fr 110px}
      .card{grid-column:span 12}
    }
  </style>
</head>
<body>
<div class="app">
  <div class="frame">
    <!-- SNÃ–-canvas -->
    <canvas id="snow"></canvas>

    <div class="band">
      <h1>SvenshÃ¶gens vandrarhem</h1>
      <small>InfoskÃ¤rm</small>
    </div>

    <!-- 1: VÃ¤lkommen -->
    <section class="slide active" data-title="VÃ¤lkommen â„ï¸">
      <div class="welcome-panel">
        <p style="font-size:clamp(32px,6vh,70px);color:var(--marin);font-weight:800;margin:0;">VÃ¤lkommen</p>
        <p style="font-size:clamp(20px,3.8vh,45px);margin-top:1vh">Welcome Â· Willkommen Â· Bienvenidos Â· Bienvenue Â· Witamy Â· ã‚ˆã†ã“ã</p>
      </div>
    </section>

    <!-- 2: Kontakt -->
    <section class="slide" data-title="Kontakt">
      <div class="cards" style="margin-top:12vh">
        <div class="card" style="grid-column:span 7">
          <h2>Kontakt</h2>
          <div class="list">
            <div><strong>Telefon (Jour):</strong> +46 73 402 84 98</div>
            <div><strong>E-post:</strong> svenshogensvandrarhem@gmail.com</div>
            <div><strong>Adress:</strong> HÃ¤llungevÃ¤gen 12, 444 97 SvenshÃ¶gen</div>
          </div>
        </div>
        <div class="card" style="grid-column:span 5">
          <h2>Vid behov</h2>
          <div class="list">
            <div>112 â€“ NÃ¶dnummer</div>
            <div>1177 â€“ SjukvÃ¥rdsrÃ¥dgivning</div>
            <div><strong>WiFi (gÃ¤st):</strong> Annexet Â· Ingen kod</div>
          </div>
        </div>
      </div>
    </section>

    <!-- 3: Faciliteter + Regler + Tillval -->
    <section class="slide" data-title="Faciliteter">
      <div class="cards" style="margin-top:10vh">
        <div class="card" style="grid-column:span 12">
          <h2>Faciliteter</h2>
          <div class="mini-grid">
            <div class="mini-card"><div class="emoji">ğŸ½ï¸</div><div class="label">KÃ¶k & allrum 24/7</div></div>
            <div class="mini-card"><div class="emoji">ğŸ§º</div><div class="label">TvÃ¤tt (fritt i duschrum)</div></div>
            <div class="mini-card"><div class="emoji">ğŸ…¿ï¸</div><div class="label">Gratis parkering</div></div>
            <div class="mini-card"><div class="emoji">ğŸ±</div><div class="label">Biljard</div></div>
            <div class="mini-card"><div class="emoji">ğŸ“</div><div class="label">Bordtennis</div></div>
          </div>

          <h2 style="margin-top:3.6vh">Regler</h2>
          <ul class="center-list">
            <li>â° Incheckning frÃ¥n <strong>15:00</strong></li>
            <li>ğŸ¾ Husdjur tillÃ¥tet (ej i gemensamma utrymmen)</li>
          </ul>

          <h2 style="margin-top:3.2vh">Tillval</h2>
          <ul class="center-list">
            <li>ğŸ›ï¸ Extra lakan â€“ <strong>60 kr</strong></li>
            <li>ğŸ§¼ Extra handduk â€“ <strong>20 kr</strong></li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 4: AffÃ¤rer -->
    <section class="slide" data-title="AffÃ¤rer">
      <div class="cards" style="margin-top:10vh">
        <div class="card">
          <h2>AffÃ¤rer â€“ ICA Kvantum</h2>
          <div class="item">
            <div class="icon">ğŸ›ï¸</div>
            <div>
              <div>Vassgatan 1, 444 31 Stenungsund</div>
              <div>Tel: 0303-72 62 00</div>
            </div>
            <div class="qr">
              <img alt="QR â€“ VÃ¤gbeskrivning till ICA Kvantum Stenungsund"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3DVassgatan%2B1%252C%2B444%2B31%2BStenungsund">
              <a href="https://www.google.com/maps/dir/?api=1&destination=Vassgatan+1,+444+31+Stenungsund" target="_blank" rel="noopener">Ã–ppna vÃ¤gbeskrivning</a>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>AffÃ¤rer â€“ Willys</h2>
          <div class="item">
            <div class="icon">ğŸ›’</div>
            <div>
              <div>StrandvÃ¤gen 35, 444 31 Stenungsund</div>
              <div>Tel: 0303-72 82 80</div>
            </div>
            <div class="qr">
              <img alt="QR â€“ VÃ¤gbeskrivning till Willys Stenungsund"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3DStrandv%C3%A4gen%2B35%252C%2B444%2B31%2BStenungsund">
              <a href="https://www.google.com/maps/dir/?api=1&destination=Strandv%C3%A4gen+35,+444+31+Stenungsund" target="_blank" rel="noopener">Ã–ppna vÃ¤gbeskrivning</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 5: Restauranger (4 kort inkl. Mr Johanssons & McDonald's) -->
    <section class="slide" data-title="Restauranger">
      <div class="cards" style="margin-top:8vh">
        <div class="card">
          <h2>Restauranger â€“ Laxbutiken</h2>
          <div class="item">
            <div class="icon">ğŸŸ</div>
            <div>
              <div>Ljungs Berg 200, 459 93 Ljungskile</div>
              <div>Tel: 0522-208 10</div>
            </div>
            <div class="qr">
              <img alt="QR â€“ VÃ¤gbeskrivning Laxbutiken"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3DLjungs%2BBerg%2B200%252C%2B459%2B93%2BLjungskile">
              <a href="https://www.google.com/maps/dir/?api=1&destination=Ljungs+Berg+200,+459+93+Ljungskile" target="_blank" rel="noopener">Ã–ppna vÃ¤gbeskrivning</a>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Restauranger â€“ Pizzeria Milano</h2>
          <div class="item">
            <div class="icon">ğŸ•</div>
            <div>
              <div>Strandplan 35, 444 31 Stenungsund</div>
              <div>Tel: 0303-45 99 00</div>
            </div>
            <div class="qr">
              <img alt="QR â€“ VÃ¤gbeskrivning Pizzeria Milano"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3DStrandplan%2B35%252C%2B444%2B31%2BStenungsund">
              <a href="https://www.google.com/maps/dir/?api=1&destination=Strandplan+35,+444+31+Stenungsund" target="_blank" rel="noopener">Ã–ppna vÃ¤gbeskrivning</a>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Restauranger â€“ Mr Johanssons</h2>
          <div class="item">
            <div class="icon">ğŸ½ï¸</div>
            <div>
              <div>GÃ¤rdesvÃ¤gen 1, 444 31 Stenungsund</div>
              <div>Tel: 0303-67 212</div>
            </div>
            <div class="qr">
              <img alt="QR â€“ VÃ¤gbeskrivning Mr Johanssons"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3DG%C3%A4rdesv%C3%A4gen%2B1%252C%2B444%2B31%2BStenungsund">
              <a href="https://www.google.com/maps/dir/?api=1&destination=G%C3%A4rdesv%C3%A4gen+1,+444+31+Stenungsund" target="_blank" rel="noopener">Ã–ppna vÃ¤gbeskrivning</a>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Restauranger â€“ McDonaldâ€™s</h2>
          <div class="item">
            <div class="icon">ğŸ”</div>
            <div>
              <div>Stenunge AllÃ© 1, 444 30 Stenungsund</div>
              <div>Tel: 0303-65 48 00</div>
            </div>
            <div class="qr">
              <img alt="QR â€“ VÃ¤gbeskrivning McDonaldâ€™s"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fdir%2F%3Fapi%3D1%26destination%3DStenunge%2BAll%C3%A9%2B1%252C%2B444%2B30%2BStenungsund">
              <a href="https://www.google.com/maps/dir/?api=1&destination=Stenunge+All%C3%A9+1,+444+30+Stenungsund" target="_blank" rel="noopener">Ã–ppna vÃ¤gbeskrivning</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 6: VÃ¤der (live) -->
    <section class="slide" data-title="VÃ¤der">
      <div class="cards" style="margin-top:12vh">
        <div class="card" style="grid-column:span 7" id="weather-card">
          <h2>VÃ¤der</h2>
          <p id="w-temp">Temperatur: â€¦</p>
          <p id="w-wind">Vind: â€¦</p>
          <p id="w-code">VÃ¤der: â€¦</p>
          <small>Uppdateras frÃ¥n Open-Meteo.</small>
        </div>
        <div class="card" style="grid-column:span 5">
          <h2>Tips</h2>
          <ul>
            <li>Packa regnjacka vid risk fÃ¶r skurar</li>
            <li>Naturstig & badplats nÃ¤ra vandrarhemmet</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- 7: Utcheckning -->
    <section class="slide" data-title="Utcheckning">
      <div class="cards" style="margin-top:10vh">
        <div class="card" style="grid-column:span 7">
          <h2>Utcheckningsinstruktioner</h2>
          <ul class="center-list">
            <li>ğŸ• Utcheckning senast kl <strong>13.00</strong> (om inget annat avtalats)</li>
            <li>ğŸ—ï¸ LÃ¤mna nyckelkortet i plastfickan pÃ¥ kylskÃ¥pet eller pÃ¥ bordet</li>
            <li>ğŸ‘‹ Ni behÃ¶ver <strong>inte</strong> sÃ¤ga till personalen nÃ¤r ni lÃ¤mnar</li>
            <li>ğŸ§¹ StÃ¤da gÃ¤rna av grovt innan avresa</li>
          </ul>
        </div>
        <div class="card" style="grid-column:span 5;display:grid;align-content:center;gap:1.2rem">
          <div style="display:flex;flex-direction:column;align-items:center;gap:1rem;text-align:center">
            <div class="icon-lg">â­</div>
            <h2>Tack fÃ¶r din vistelse!</h2>
            <p style="font-size:clamp(16px,2.6vh,28px);margin:0 0 .4em;">Vi blir jÃ¤tteglada om du lÃ¤mnar ett omdÃ¶me pÃ¥ bokningssidorna.</p>
            <p style="opacity:.85;font-size:clamp(14px,2.2vh,22px);margin:0">Det hjÃ¤lper oss och framtida gÃ¤ster.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 8: Kollektivtrafik (original struktur) -->
    <section class="slide" data-title="Kollektivtrafik">
      <div class="cards" style="margin-top:10vh">
        <div class="card">
          <h2>Kollektivtrafik â€“ TÃ¥g</h2>
          <div class="item">
            <div class="icon">ğŸš†</div>
            <div>SvenshÃ¶gen station â€“ mot GÃ¶teborg / Uddevalla.</div>
            <div class="qr">
              <img alt="QR â€“ Karta SvenshÃ¶gen station"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.google.com%2Fmaps%2Fsearch%2FSvensh%C3%B6gen%20station">
              <a href="https://www.google.com/maps/search/Svensh%C3%B6gen%20station" target="_blank" rel="noopener">Visa i Maps</a>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Kollektivtrafik â€“ Buss 334</h2>
          <div class="item">
            <div class="icon">ğŸšŒ</div>
            <div>HÃ¥llplats: <strong>SvenshÃ¶gens sjukhus</strong> (linje 334).</div>
            <div class="qr">
              <img alt="QR â€“ VÃ¤sttrafik reseplanerare"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fwww.vasttrafik.se%2Freseplanering%2F">
              <a href="https://www.vasttrafik.se/reseplanering/" target="_blank" rel="noopener">Planera resa</a>
            </div>
          </div>
        </div>

        <div class="card">
          <h2>Kollektivtrafik â€“ App</h2>
          <div class="item">
            <div class="icon">ğŸ“±</div>
            <div>VÃ¤sttrafik To Go â€“ kÃ¶p biljett i appen.</div>
            <div class="qr">
              <img alt="QR â€“ App Store"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fapps.apple.com%2Fse%2Fapp%2Fv%C3%A4sttrafik-to-go%2Fid1081161150">
              <a href="https://apps.apple.com/se/app/v%C3%A4sttrafik-to-go/id1081161150" target="_blank" rel="noopener">iOS â€“ App Store</a>
              <img alt="QR â€“ Google Play"
                   src="https://api.qrserver.com/v1/create-qr-code/?size=130x130&data=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dse.vasttrafik.to_go">
              <a href="https://play.google.com/store/apps/details?id=se.vasttrafik.to_go" target="_blank" rel="noopener">Android â€“ Google Play</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Progress (8 slides) -->
    <div class="progress" aria-hidden="true">
      <span class="dot active"></span><span class="dot"></span><span class="dot"></span>
      <span class="dot"></span><span class="dot"></span><span class="dot"></span>
      <span class="dot"></span><span class="dot"></span>
    </div>
  </div>
</div>

<noscript>
  <div style="position:fixed;inset:0;background:#fff;color:#000;display:grid;place-items:center;font:16px/1.4 system-ui;padding:2rem;">
    JavaScript krÃ¤vs fÃ¶r att visa infoskÃ¤rmen. SlÃ¥ pÃ¥ JavaScript i webblÃ¤saren.
  </div>
</noscript>

<script>
  const SLIDE_TIME_MS = 12000;
  const HOLIDAY_MODE = true; // slÃ¥ av/pÃ¥ julaccent om ni vill

  // Slides + header-undertext
  window.addEventListener('DOMContentLoaded', () => {
    const slides=[...document.querySelectorAll('.slide')];
    const dots=[...document.querySelectorAll('.dot')];

    if (!slides.some(s => s.classList.contains('active')) && slides.length) {
      slides[0].classList.add('active');
      if (dots[0]) dots[0].classList.add('active');
    }

    let i = slides.findIndex(s => s.classList.contains('active'));
    if (i < 0) i = 0;

    function headerText(){
      const title = slides[i]?.dataset?.title || 'InfoskÃ¤rm';
      if (HOLIDAY_MODE) return `ğŸ„ ${title} â€¢ God jul!`;
      return title;
    }

    function show(n){
      slides.forEach((s,x)=>s.classList.toggle('active',x===n));
      dots.forEach((d,x)=>d.classList.toggle('active',x===n));
      i=n;
      const small = document.querySelector('.band small');
      if (small) small.textContent = headerText();
    }
    function next(){ show((i+1)%slides.length) }

    setInterval(next, SLIDE_TIME_MS);

    const small = document.querySelector('.band small');
    small && (small.textContent = headerText());
  });

  // VÃ¤der (Open-Meteo)
  ;(async function(){
    try{
      const lat=58.15, lon=11.94;
      const r=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
      const j=await r.json(), c=j.current_weather;
      const codeMap={0:"Klar himmel â˜€ï¸",1:"Mest klart ğŸŒ¤ï¸",2:"VÃ¤xlande moln â›…",3:"Mulet â˜ï¸",45:"Dimma ğŸŒ«ï¸",48:"Dimma ğŸŒ«ï¸",51:"Duggregn ğŸŒ¦ï¸",53:"Duggregn ğŸŒ¦ï¸",55:"Duggregn ğŸŒ¦ï¸",61:"Regn ğŸŒ§ï¸",63:"Regn ğŸŒ§ï¸",65:"Regn ğŸŒ§ï¸",71:"SnÃ¶ â„ï¸",73:"SnÃ¶ â„ï¸",75:"SnÃ¶ â„ï¸",80:"Skurar ğŸŒ¦ï¸",81:"Skurar ğŸŒ¦ï¸",82:"Skurar ğŸŒ¦ï¸",95:"Ã…ska â›ˆï¸",96:"Ã…ska â›ˆï¸",99:"Ã…ska â›ˆï¸"};
      document.getElementById('w-temp').textContent=`Temperatur: ${Math.round(c.temperature)}Â°C`;
      document.getElementById('w-wind').textContent=`Vind: ${Math.round(c.windspeed)} m/s`;
      document.getElementById('w-code').textContent=`VÃ¤der: ${codeMap[c.weathercode]||'â€”'}`;
    }catch(e){
      const el=document.getElementById('weather-card');
      el && el.insertAdjacentHTML('beforeend','<p>Kunde inte hÃ¤mta vÃ¤der just nu.</p>');
    }
  })();

  // FALLANDE SNÃ– â€“ lÃ¤tt & skonsam
  (function(){
    const canvas = document.getElementById('snow');
    const ctx = canvas.getContext('2d');
    let w, h, flakes;

    function resize(){
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
      const count = Math.min(180, Math.floor(w*h/12000)); // skalar efter yta
      flakes = new Array(count).fill(0).map(()=>newFlake());
    }

    function newFlake(){
      return {
        x: Math.random()*w,
        y: Math.random()*-h,
        r: 1.2 + Math.random()*2.6,        // radie
        sp: 0.6 + Math.random()*1.1,       // fallhastighet
        drift: (Math.random()*0.6)+0.2,    // sidodrift
        phase: Math.random()*Math.PI*2
      };
    }

    function tick(){
      ctx.clearRect(0,0,w,h);
      ctx.fillStyle = 'rgba(255,255,255,0.9)';
      for (let f of flakes){
        f.y += f.sp;
        f.x += Math.sin(f.phase += 0.015) * f.drift;
        if (f.y > h + 10 || f.x < -10 || f.x > w+10){
          // Ã¥terstÃ¤ll flingan hÃ¶gst upp
          f.x = Math.random()*w;
          f.y = -10;
          f.r = 1.2 + Math.random()*2.6;
          f.sp = 0.6 + Math.random()*1.1;
          f.drift = (Math.random()*0.6)+0.2;
          f.phase = Math.random()*Math.PI*2;
        }
        ctx.beginPath();
        ctx.arc(f.x, f.y, f.r, 0, Math.PI*2);
        ctx.fill();
      }
      requestAnimationFrame(tick);
    }

    window.addEventListener('resize', resize);
    resize();
    tick();
  })();
</script>
</body>
</html>
